var m=(o,e,t)=>{if(!e.has(o))throw TypeError("Cannot "+t)};var s=(o,e,t)=>(m(o,e,"read from private field"),t?t.call(o):e.get(o)),u=(o,e,t)=>{if(e.has(o))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(o):e.set(o,t)},d=(o,e,t,n)=>(m(o,e,"write to private field"),n?n.call(o,t):e.set(o,t),t);import"./assets/styles-bebffb85.js";import{a as f,P as $,i as g}from"./assets/vendor-a80831a6.js";var i,c,l;class _{constructor(){u(this,i,"https://api.unsplash.com/search/photos");u(this,c,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");u(this,l,"")}async getPopularPhotos(e){const t=`${s(this,i)}?query=popular&page=${e}&per_page=12&orientation=portrait&client_id=${s(this,c)}`;try{const{data:n}=await f(t);return n}catch(n){console.log(n)}}set query(e){d(this,l,e)}async getPhotoByQuery(e){const t=`${s(this,i)}?query=${s(this,l)}&page=${e}&per_page=12&orientation=portrait&client_id=${s(this,c)}`;try{const{data:n}=await f(t);return n}catch(n){console.log(n)}}}i=new WeakMap,c=new WeakMap,l=new WeakMap;function p(o){return o.map(({alt_description:e,urls:{small:t}})=>`<li class="gallery__item"><img src="${t}" alt="${e}"/></li>`).join("")}const y=document.querySelector(".js-gallery"),a=new _,h=document.getElementById("tui-pagination-container"),v=document.querySelector(".js-search-form"),P=document.querySelector(".loader"),w={totalItems:0,itemsPerPage:12,visiblePages:5,page:1},r=new $(h,w),L=r.getCurrentPage();a.getPopularPhotos(L).then(o=>{const e=p(o.results);console.log(o),y.innerHTML=e,r.reset(o.total)});r.on("afterMove",M);function S(o){o.preventDefault();const e=o.target.elements.query.value.trim();if(e===""){g.warning({message:"Enter search query"});return}P.classList.remove("is-hidden"),r.off("afterMove",M),r.off("afterMove",q),a.query=e,a.getPhotoByQuery(L).then(t=>{if(t.results.length===0){g.warning({message:"Not Found, try another query"});return}g.success({message:`We found ${t.total} photos!`}),t.total<=12?h.style.display="none":h.style.display="block";const n=p(t.results);console.log(t),y.innerHTML=n,r.reset(t.total)}).catch(t=>{console.log(t),g.error({message:"Something went wrong"})}).finally(()=>{P.classList.add("is-hidden"),v.reset()}),r.on("afterMove",q)}function M(o){const e=o.page;a.getPopularPhotos(e).then(t=>{const n=p(t.results);y.innerHTML=n})}function q(o){const e=o.page;a.getPhotoByQuery(e).then(t=>{const n=p(t.results);y.innerHTML=n})}v.addEventListener("submit",S);
//# sourceMappingURL=commonHelpers.js.map
