{"version":3,"file":"commonHelpers.js","sources":["../src/js/UnsplashAPI.js","../src/js/createMarkup.js","../src/js/gallery.js"],"sourcesContent":["import axios from 'axios';\n\nexport class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com/search/photos';\n  #API_key = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n  #query = '';\n  async getPopularPhotos(page) {\n    const url = `${\n      this.#BASE_URL\n    }?query=popular&page=${page}&per_page=12&orientation=portrait&client_id=${\n      this.#API_key\n    }`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n  async getPhotoByQuery(page) {\n    const url = `${this.#BASE_URL}?query=${\n      this.#query\n    }&page=${page}&per_page=12&orientation=portrait&client_id=${this.#API_key}`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n","export function createMarkup(array) {\n  return array\n    .map(\n      ({ alt_description, urls: { small } }) =>\n        `<li class=\"gallery__item\"><img src=\"${small}\" alt=\"${alt_description}\"/></li>`\n    )\n    .join('');\n}\n","import Pagination from 'tui-pagination';\nimport { UnsplashAPI } from './UnsplashAPI';\nimport { createMarkup } from './createMarkup';\nimport 'tui-pagination/dist/tui-pagination.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst galleryList = document.querySelector('.js-gallery');\nconst api = new UnsplashAPI();\nconst container = document.getElementById('tui-pagination-container');\nconst form = document.querySelector('.js-search-form');\nconst loader = document.querySelector('.loader');\nconst options = {\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n};\n\nconst pagination = new Pagination(container, options);\nconst page = pagination.getCurrentPage();\n\napi.getPopularPhotos(page).then(result => {\n  const markup = createMarkup(result.results);\n  console.log(result);\n  galleryList.innerHTML = markup;\n  pagination.reset(result.total);\n});\n\npagination.on('afterMove', getPopular);\n\nfunction formSubmit(event) {\n  event.preventDefault();\n  const inputValue = event.target.elements.query.value.trim();\n  if (inputValue === '') {\n    iziToast.warning({\n      message: 'Enter search query',\n    });\n    return;\n  }\n\n  loader.classList.remove('is-hidden');\n\n  pagination.off('afterMove', getPopular);\n  pagination.off('afterMove', getByQuery);\n  api.query = inputValue;\n  api\n    .getPhotoByQuery(page)\n    .then(result => {\n      if (result.results.length === 0) {\n        iziToast.warning({\n          message: 'Not Found, try another query',\n        });\n\n        return;\n      }\n\n      iziToast.success({\n        message: `We found ${result.total} photos!`,\n      });\n\n      if (result.total <= 12) {\n        container.style.display = 'none';\n      } else {\n        container.style.display = 'block';\n      }\n      const markup = createMarkup(result.results);\n      console.log(result);\n      galleryList.innerHTML = markup;\n      pagination.reset(result.total);\n    })\n    .catch(error => {\n      console.log(error);\n      iziToast.error({\n        message: 'Something went wrong',\n      });\n    })\n    .finally(() => {\n      loader.classList.add('is-hidden');\n      form.reset();\n    });\n\n  pagination.on('afterMove', getByQuery);\n}\n\nfunction getPopular(event) {\n  const currentPage = event.page;\n  api.getPopularPhotos(currentPage).then(result => {\n    const markup = createMarkup(result.results);\n    galleryList.innerHTML = markup;\n  });\n}\n\nfunction getByQuery(event) {\n  const currentPage = event.page;\n  api.getPhotoByQuery(currentPage).then(result => {\n    const markup = createMarkup(result.results);\n    galleryList.innerHTML = markup;\n  });\n}\n\nform.addEventListener('submit', formSubmit);\n"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_key","_query","page","url","__privateGet","data","axios","error","newQuery","__privateSet","createMarkup","array","alt_description","small","galleryList","api","container","form","loader","options","pagination","Pagination","result","markup","getPopular","formSubmit","event","inputValue","iziToast","getByQuery","currentPage"],"mappings":"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"}